name: Validate that the example config.php has valid syntax

on:
  pull_request:
    paths:
      - 'config.php'

jobs:
  validate-config:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v5
        with:
          fetch-depth: 1
      - name: Set up PHP 8
        uses: shivammathur/setup-php@c541c155eee45413f5b09a52248675b1a2575231 # v2.31.1
        with:
          php-version: 8.4
      - name: Validate config.php syntax is compatible with our latest supported PHP version (8.4)
        run: php -l ./config.php && find ./php/includes -name '*.php' -exec php -l {} +
      - name: Set up PHP 5.5
        uses: shivammathur/setup-php@c541c155eee45413f5b09a52248675b1a2575231 # v2.31.1
        with:
          php-version: 5.5
      - name: Validate config.php syntax is compatible with our oldest supported PHP version (5.5)
        run: php -l ./config.php && find ./php/includes -name '*.php' -exec php -l {} +
